<div class="p-4 dark:bg-gray-900 h-screen flex flex-col">

    <div class="h-14 flex-none text-black dark:text-white text-5xl">
        <h2>REQUERIMIENTOS</h2>
    </div>
    
    <div class="grid sm:grid-cols-3 grid-cols-1 pb-4 w-full items-center flex-none justify-center">
        <div class="max-w-xs mx-2 col-span-1">
            <label for="Campus" class="block -mb-2 ml-2 text-sm font-medium text-gray-900 dark:text-white">Sede</label>
            <select  id="Campus" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500">
                <option >TODOS</option>
                <option *ngFor="let camp of allCampus" [ngValue]="sedeFilter">{{camp.name}}</option>
            </select>
        </div>
        <div class="max-w-xs mx-2 col-span-1">
            <label for="Campus" class="block -mb-2 ml-2 text-sm font-medium text-gray-900 dark:text-white">Estatus</label>
            <select  id="Campus" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500">
                <option >TODOS</option>
                <option *ngFor="let status of allStatus" [ngValue]="statusFilter">{{status}}</option>
            </select>
        </div>
        <div class="max-w-xs mx-2 col-span-1">
            <label for="Area" class="block -mb-2 ml-2 text-sm font-medium text-gray-900 dark:text-white">Area</label>
            <select id="Area" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500">
                <option >TODOS</option>
                <option *ngFor="let area of allAreas" [ngValue]="areaFilter">{{area.name}}</option>
            </select>
        </div>

        <div class="max-w-xs col-span-1 flex">
            <div class="w-1/2 px-2">
                <label for="DateInit" class="block -mb-2 ml-2 text-sm font-medium text-gray-900 dark:text-white">Desde</label>
                <input type="date" id="DateInit" class="bg-gray-50 border leading-none border-gray-300 text-gray-900 
                text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full 
                p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400
                dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" required
                [(ngModel)]="stDate" />
            </div>
            <div class="w-1/2 px-2">
                <label for="DateEnd" class="block -mb-2 ml-2 text-sm font-medium text-gray-900 dark:text-white">Hasta</label>
                <input type="date" id="DateEnd" class="bg-gray-50 border leading-none
                border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 
                block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white
                dark:focus:ring-blue-500 dark:focus:border-blue-500" required
                [(ngModel)]="edDate" />
            </div>
        </div>

        <div class="max-w-xs mx-2 col-span-1">
            <button class=" bg-blue-600 rounded-lg p-2 m-2 " (click)="getRequirements()"> FILTRAR</button>
        </div>
    </div>

    <div class="p-4 border-2 border-gray-300 border-dashed rounded-lg dark:border-gray-700 w-full flex-1 flex flex-col overflow-y-auto">
    
    <div class="mb-4 border-b border-gray-200 dark:border-gray-700">
        <ul class="flex flex-nowrap -mb-px text-sm font-medium text-center justify-start overflow-x-auto" id="default-tab" role="tablist">
            <li class="me-2 flex-shrink-0" role="presentation">
                <button class="inline-block p-4 border-b-2 rounded-t-lg hover:text-gray-600 text-white
                hover:border-gray-300 dark:hover:text-gray-300" id="requisitions-tab" type="button" role="tab" aria-controls="requisitions" aria-selected="false">
                    REQUERIMIENTOS
                </button>
            </li>
        </ul>
    </div> 
    
    <div class="h-full w-full">
        <table class="min-w-full table-auto border-collapse border border-gray-200 dark:border-gray-700">
            <thead>
                <tr class="bg-gray-100 dark:bg-gray-800">
                    <th class="px-4 py-2 border border-gray-200 dark:border-gray-700 text-gray-900 dark:text-white">Código</th>
                    <th class="px-4 py-2 border border-gray-200 dark:border-gray-700 text-gray-900 dark:text-white">Fecha</th>
                    <th class="px-4 py-2 border border-gray-200 dark:border-gray-700 text-gray-900 dark:text-white">Área</th>
                    <th class="px-4 py-2 border border-gray-200 dark:border-gray-700 text-gray-900 dark:text-white">Encargado</th>
                    <th class="px-4 py-2 border border-gray-200 dark:border-gray-700 text-gray-900 dark:text-white">Sala</th>
                    <th class="px-4 py-2 border border-gray-200 dark:border-gray-700 text-gray-900 dark:text-white">Prioridad</th>
                    <th class="px-4 py-2 border border-gray-200 dark:border-gray-700 text-gray-900 dark:text-white">Estado</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let requerimiento of paginatedRequirements">
                    <td class="px-4 py-2 border border-gray-200 dark:border-gray-700 text-gray-900 dark:text-white">{{ requerimiento.codigo }}</td>
                    <td class="px-4 py-2 border border-gray-200 dark:border-gray-700 text-gray-900 dark:text-white">{{ requerimiento.fecha }}</td>
                    <td class="px-4 py-2 border border-gray-200 dark:border-gray-700 text-gray-900 dark:text-white">{{ requerimiento.area }}</td>
                    <td class="px-4 py-2 border border-gray-200 dark:border-gray-700 text-gray-900 dark:text-white">{{ requerimiento.encargado }}</td>
                    <td class="px-4 py-2 border border-gray-200 dark:border-gray-700 text-gray-900 dark:text-white">{{ requerimiento.sala }}</td>
                    <td class="px-4 py-2 border border-gray-200 dark:border-gray-700 text-gray-900 dark:text-white">{{ requerimiento.prioridad }}</td>
                    <td class="px-4 py-2 border border-gray-200 dark:border-gray-700 text-gray-900 dark:text-white">{{ requerimiento.estado }}</td>
                </tr>
            </tbody>
        </table>

        <div class="flex justify-between items-center mt-4">
            <button 
                (click)="changePage(page - 1)" 
                [disabled]="page === 1"
                class="px-4 py-2 bg-gray-300 hover:bg-gray-400 disabled:bg-gray-100 dark:bg-gray-700 dark:hover:bg-gray-600">
                Anterior
            </button>

            <span class="text-gray-700 dark:text-gray-300">Página {{ page }}</span>

            <button 
                (click)="changePage(page + 1)" 
                [disabled]="page >= (totalItems / pageSize)"
                class="px-4 py-2 bg-gray-300 hover:bg-gray-400 disabled:bg-gray-100 dark:bg-gray-700 dark:hover:bg-gray-600">
                Siguiente
            </button>
        </div>

        <div class="mt-6">
            <button (click)="exportToExcel()" class="px-4 py-2 bg-blue-500 text-white rounded mr-2 hover:bg-blue-600">Exportar a Excel</button>
            <button (click)="exportToPDF()" class="px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600">Exportar a PDF</button>
        </div>
    </div>
    </div>
</div>
