<div class="containerReq" style="max-height:100%;" >

  <mat-card class="cardFondo">
    <mat-tab-group mat-stretch-tabs="false" mat-align-tabs="center" color="accent" [(selectedIndex)]="demo1TabIndex">
    
      <mat-tab label="NUEVO" class="tabWare">
        <div class="container" style="margin: 0px; text-align:center;" >
  
          <mat-card class="mat-elevation-z8 card-orden">
            <mat-card-title>NUEVO USUARIO</mat-card-title>
            <mat-card-content>


              <mat-form-field style="width:28%; min-width: 200px;" appearance="outline" >
                <mat-label>Tipo Doc:</mat-label>
                <mat-select required [(ngModel)]="typeSelected" >
                    <mat-option *ngFor="let ty of docTypes" [value]="ty">{{ty}}</mat-option>
                </mat-select>
              </mat-form-field>

              <mat-form-field style="width:28%; min-width: 200px;" appearance="outline">
                <mat-label>Nº Doc:</mat-label>
                <input matInput required [(ngModel)]="newUser.doc_number" >
              </mat-form-field>

              <button mat-mini-fab (click)="searchDNI()" [disabled]="typeSelected!='DNI'"><mat-icon>search</mat-icon></button>

              <mat-form-field style="width:90%; min-width: 200px;" appearance="outline">
                <mat-label>Nombres:</mat-label>
                <input matInput required [(ngModel)]="newUser.first_name" (ngModelChange)="changeName($event)">
              </mat-form-field>

              <mat-form-field style="width:45%; min-width: 200px;" appearance="outline">
                <mat-label>Apellido Paterno:</mat-label>
                <input matInput required [(ngModel)]="newUser.paternal_surname" (ngModelChange)="newUser.paternal_surname= $event.toUpperCase()">
              </mat-form-field>

              <mat-form-field style="width:45%; min-width: 200px;" appearance="outline">
                <mat-label>Apellido Materno:</mat-label>
                <input matInput required [(ngModel)]="newUser.maternal_surname" (ngModelChange)="newUser.maternal_surname= $event.toUpperCase()">
              </mat-form-field>

              <mat-form-field style="width:28%; min-width: 200px;" appearance="outline">
                <mat-label>Genero:</mat-label>
                <input matInput required [(ngModel)]="newUser.gender" (ngModelChange)="newUser.gender= $event.toUpperCase()">
              </mat-form-field>

              <mat-form-field style="width:28%; min-width: 200px;" appearance="outline">
                <mat-label>Fecha Nac.:</mat-label>
                <input matInput required [(ngModel)]="newUser.birth_date" (ngModelChange)="newUser.birth_date= $event.toUpperCase()">
              </mat-form-field>

              <mat-form-field style="width:28%; min-width: 200px;" appearance="outline">
                <mat-label>Estado Civil:</mat-label>
                <input matInput required [(ngModel)]="newUser.civil_status" (ngModelChange)="newUser.civil_status= $event.toUpperCase()">
              </mat-form-field>

            </mat-card-content>
          </mat-card>

          <mat-card class="mat-elevation-z8 card-orden">
            <mat-card-content>

              <mat-form-field style="width:90%; min-width: 200px;" appearance="outline">
                <mat-label>Direccion:</mat-label>
                <input matInput required [(ngModel)]="newUser.address" (ngModelChange)="newUser.address= $event.toUpperCase()">
              </mat-form-field>

              <mat-form-field style="width:28%; min-width: 200px;" appearance="outline">
                <mat-label>Distrito:</mat-label>
                <input matInput required [(ngModel)]="newUser.district" (ngModelChange)="newUser.district= $event.toUpperCase()">
              </mat-form-field>

              <mat-form-field style="width:28%; min-width: 200px;" appearance="outline">
                <mat-label>Provincia:</mat-label>
                <input matInput required [(ngModel)]="newUser.province" (ngModelChange)="newUser.province= $event.toUpperCase()">
              </mat-form-field>

              <mat-form-field style="width:28%; min-width: 200px;" appearance="outline">
                <mat-label>Departamento:</mat-label>
                <input matInput required [(ngModel)]="newUser.region" (ngModelChange)="newUser.region= $event.toUpperCase()">
              </mat-form-field>
            </mat-card-content>
          </mat-card>

          <mat-card class="mat-elevation-z8 card-orden">
            <mat-card-content>

              <mat-form-field style="width:40%; min-width: 200px;" appearance="outline">
                <mat-label>Usuario:</mat-label>
                <input matInput required [(ngModel)]="newUser.username" (ngModelChange)="newUser.username= $event.toUpperCase()">
              </mat-form-field>
  
              <mat-form-field style="width:40%; min-width: 200px;" appearance="outline" >
                <mat-label>Rol:</mat-label>
                <mat-select required [(ngModel)]="roleSelected" >
                    <mat-option *ngFor="let rl of roleTypes" [value]="rl">{{rl}}</mat-option>
                </mat-select>
              </mat-form-field>
  

  
            </mat-card-content>
          </mat-card>
    
          <mat-card class="mat-elevation-z8 card-orden">
            <button mat-raised-button style="background-color: rgb(59, 145, 82); color:white" (click)="saveUser()" > 
              <mat-icon>add_task</mat-icon>
              Registrar
            </button>
            
          </mat-card>
  
        </div>
  
      </mat-tab>
      
      <mat-tab label="LISTA" class="tabWare">
  
        <div class="container" style="margin: 0px; text-align:center;" >
          <mat-card class="mat-elevation-z8 card-orden">
            <mat-card-content>
              <mat-form-field appearance="standard" style="display:display-inline">
                <mat-label>Búsqueda</mat-label>
                <input matInput (keyup)="applyFilterU($event)" placeholder="Escribe algo para buscar" #input1>
            </mat-form-field>

            <div>
              <button mat-raised-button *ngIf="user_role=='SUPER USUARIO'" style="background-color: rgb(59, 145, 82); color:white" (click)="updateUsersInfo()" > 
                Actualizar datos
              </button>
            </div> 
      
            <div class="mat-elevation-z8" style="width:100%;">
                <table mat-table style="width:100%;" [dataSource]="dataSourceUsers" matSort multiTemplateDataRows>
      
                  <ng-container matColumnDef="type_doc">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header> TIPO DOC </th>
                    <td mat-cell *matCellDef="let a"> {{a.type_doc}}</td>
                  </ng-container>
      
                  <ng-container matColumnDef="doc_number">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header> N° DOCUMENTO </th>
                    <td mat-cell *matCellDef="let a"> {{a.doc_number}}</td>
                  </ng-container>

                  <ng-container matColumnDef="first_name">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header> NOMBRES </th>
                    <td mat-cell *matCellDef="let a"> {{a.first_name}}</td>
                  </ng-container>
      
                  <ng-container matColumnDef="paternal_surname">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header> APELLIDO PATERNO </th>
                    <td mat-cell *matCellDef="let a"> {{a.paternal_surname}}</td>
                  </ng-container>
      
                  <ng-container matColumnDef="maternal_surname">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header> APELLIDO MATERNO </th>
                    <td mat-cell *matCellDef="let a"> {{a.maternal_surname}}</td>
                  </ng-container>
      
                  <ng-container matColumnDef="gender">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header> GÉNERO </th>
                    <td mat-cell *matCellDef="let a"> {{a.gender}}</td>
                  </ng-container>
      
                  <ng-container matColumnDef="birth_date">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header> FECHA DE NACIMIENTO </th>
                    <td mat-cell *matCellDef="let a"> {{a.birth_date}}</td>
                  </ng-container>

                  <ng-container matColumnDef="civil_status">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header> ESTADO CIVIL </th>
                    <td mat-cell *matCellDef="let a"> {{a.civil_status}}</td>
                  </ng-container>

                  <ng-container matColumnDef="profession">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header> PROFESION </th>
                    <td mat-cell *matCellDef="let a"> {{a.profession}}</td>
                  </ng-container>

                  <ng-container matColumnDef="cel_number">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header> CELULAR </th>
                    <td mat-cell *matCellDef="let a"> {{a.cel_number}}</td>
                  </ng-container>

                  <ng-container matColumnDef="username">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header> USUARIO </th>
                    <td mat-cell *matCellDef="let a"> {{a.username}}</td>
                  </ng-container>

                  <ng-container matColumnDef="supply_role">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header> ROL </th>
                    <td mat-cell *matCellDef="let a"> 
                      <mat-select [(value)]="a.supply_role" (selectionChange)="changeRole(a)">
                        <mat-option *ngFor="let r of roles" [value]="r" [disabled]="r=='SUPER USUARIO'"> {{r}} </mat-option>
                      </mat-select>
                      
                    </td>
                  </ng-container>

                  <ng-container matColumnDef="settings">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>  </th>
                    <td mat-cell *matCellDef="let a"> 
                      <button mat-icon-button (click)="editUser(a)"><mat-icon>settings</mat-icon></button>
                      
                    </td>
                  </ng-container>
         
      
                  <tr mat-header-row *matHeaderRowDef="usersDisplayedColumns;"></tr>
                  <tr mat-row *matRowDef="let row; columns: usersDisplayedColumns;"></tr>
      
      
      
                  <tr class="mat-row" *matNoDataRow>
                    <td class="mat-cell" colspan="6">No se encontró "{{input1.value}}"</td>
                  </tr>
                </table>
      
                <mat-paginator [pageSizeOptions]="[10, 20, 50, 100]" aria-label="Página"></mat-paginator>
            </div>
            </mat-card-content>
          </mat-card>
        </div>
  
      </mat-tab>
  

    </mat-tab-group>
  </mat-card>
      


</div>